(this["webpackJsonpe-commerce-react"]=this["webpackJsonpe-commerce-react"]||[]).push([[0],{46:function(e,t,n){},86:function(e,t,n){"use strict";n.r(t);var r,a,c,i,s,o,d,l,u=n(1),p=n(29),j=n.n(p),m=n(7),b=n(2),O=n(4),h=n(5),x=n.n(h),f=n(8),v=n(11),g=n.n(v),y=n(15),_=n.n(y),I="ADD_TO_CART",E="REMOVE_FROM_CART",S="REMOVE_ALL",w=function(e,t){return function(){var n=Object(f.a)(x.a.mark((function n(r,a){var c,i,s,o;return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,g.a.get("https://react-app-com.herokuapp.com/api/products/"+e);case 3:c=n.sent,i=c.data,r({type:I,payload:{productId:i._id,name:i.name,price:i.price,image:i.image,countInStock:i.countInStock,qty:t}}),s=a(),o=s.cart.cartItems,_.a.set("cartItems",JSON.stringify(o)),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),console.log(n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e,t){return n.apply(this,arguments)}}()},R="ORDER_CREATE_REQUEST",N="ORDER_CREATE_SUCCESS",k="ORDER_CREATE_FAILURE",D="MY_ORDER_LIST_REQUEST",C="MY_ORDER_LIST_SUCCESS",T="MY_ORDER_LIST_FAiLURE",U="ORDER_LIST_REQUEST",A="ORDER_LIST_SUCCESS",L="ORDER_LIST_FAiLURE",P="ORDER_DETAILS_REQUEST",F="ORDER_DETAILS_SUCCESS",M="ORDER_DETAILS_FAILURE",Q="ORDER_DELETE_REQUEST",q="ORDER_DELETE_SUCCESS",z="ORDER_DELETE_FAILURE",B="ORDER_EDIT_REQUEST",J="ORDER_EDIT_SUCCESS",G="ORDER_EDIT_FAILURE",Y="CHANGE_A_ITEM",H="REMOVE_CHANGE_A_ITEM",V="https://react-app-com.herokuapp.com",X=function(){return function(){var e=Object(f.a)(x.a.mark((function e(t,n){var r,a,c,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:U}),r=n(),a=r.userSignIn.userInfo,e.next=5,g.a.get(V+"/api/orders",{headers:{Authorization:"Bearer "+a.token}});case 5:c=e.sent,i=c.data,t({type:A,payload:i}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t({type:L,payload:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}()},K=n(9),W=n(10),Z=W.a.li(r||(r=Object(K.a)(["\n  display: flex;\n  justify-content: space-around;\n  align-items: baseline;\n  border: 1px solid gray;\n  margin-bottom: 20px;\n  .admin-list__user-info {\n    display: flex;\n    flex-direction: column;\n  }\n"]))),$=n(0),ee=function(e){var t=e.item;return Object($.jsxs)(Z,{children:[Object($.jsxs)("div",{children:[Object($.jsx)("h5",{children:"Order Id"}),Object($.jsx)(m.b,{to:"/order/"+t._id,children:t._id.slice(-7)})]}),Object($.jsxs)("div",{className:"admin-list__user-info",children:[Object($.jsx)("h5",{children:"User"}),Object($.jsxs)("span",{children:[" Id:",t.user._id.slice(-7)]}),Object($.jsxs)("span",{children:["Name: ",t.user.name]}),Object($.jsxs)("span",{children:["Email: ",t.user.email]})]}),Object($.jsxs)("div",{children:[Object($.jsx)("h5",{children:"Order info"}),Object($.jsx)("p",{children:t.isDelivered?"Delivered":"On its way"}),Object($.jsxs)("p",{children:["Total price: ",t.totalPrice,".00 \xa3"]})]})]})},te=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){return e.allOrders.allOrders}));return Object(u.useEffect)((function(){e(X())}),[]),Object($.jsxs)("div",{className:"container",children:[(null===t||void 0===t?void 0:t.length)<=0&&Object($.jsx)("p",{children:"No Orders"}),Object($.jsx)("ul",{children:(null===t||void 0===t?void 0:t.length)>0&&(null===t||void 0===t?void 0:t.map((function(e){return Object($.jsx)(ee,{item:e},e._id)})))})]})},ne=n(19),re=n(20),ae=n(12),ce=W.a.li(a||(a=Object(K.a)(["\n  margin-bottom: 15px;\n  border: 1px solid black;\n  padding: 10px;\n  .order-item__descr {\n    display: flex;\n    align-items: center;\n  }\n\n  .order-item__descr p,\n  .order-item__descr span {\n    flex: 2;\n  }\n  .order-item__descr p {\n    margin-left: 20px;\n    @media screen and (min-width: 1280px) {\n      flex: 0.3;\n      margin-left: 150px;\n    }\n  }\n  .order-item__descr span {\n    max-width: 150px;\n  }\n  .order-item__descr button {\n    height: 35px;\n  }\n\n  .order-item__descr form {\n    @media screen and (min-width: 320px) and (max-width: 767px) {\n      margin-right: -50px;\n    }\n  }\n  .order-item__descr form {\n    flex: 0.5;\n  }\n  .order-item__descr form input {\n    max-width: 20%;\n    height: 35px;\n  }\n  .order-item__descr form input:nth-child(1) {\n    //margin-left: -110px;\n    margin-right: 120px;\n    @media screen and (min-width: 320px) and (max-width: 767px) {\n      margin-right: 60px;\n    }\n    @media screen and (min-width: 1280px) {\n      flex: 0.3;\n      margin-right: 200px;\n    }\n  }\n"]))),ie={price:"",qty:null},se=function(e){var t,n=e.item,r=(e.order,Object(b.b)()),a=Object(b.c)((function(e){return e.userSignIn.userInfo.isAdmin})),c=Object(u.useState)(Object(ae.a)(Object(ae.a)({},ie),{},{price:n.price,qty:n.qty})),i=Object(ne.a)(c,2),s=i[0],o=i[1],d=function(e){var t=e.target,n=t.name,r=t.value;o(Object(ae.a)(Object(ae.a)({},s),{},Object(re.a)({},n,r)))};return Object($.jsx)($.Fragment,{children:Object($.jsx)(ce,{children:Object($.jsxs)("div",{className:"order-item__descr",children:[Object($.jsx)("span",{children:n.name}),a?Object($.jsxs)($.Fragment,{children:[Object($.jsxs)("p",{children:[" ",null===(t=n.productId)||void 0===t?void 0:t.slice(-7)]}),Object($.jsxs)("form",{children:[Object($.jsx)("input",{type:"text",name:"price",value:s.price,onChange:d}),Object($.jsx)("input",{type:"text",name:"qty",value:s.qty,onChange:d})]}),Object($.jsx)("button",{onClick:function(e){var t,a=e.target.dataset.id;r((t=Object(ae.a)(Object(ae.a)({},n),{},{productId:a,price:s.price,qty:s.qty}),function(){var e=Object(f.a)(x.a.mark((function e(n){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n({type:Y,payload:{productId:t}})}catch(r){console.log(r)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},"data-id":n.productId,children:"Save"})]}):Object($.jsxs)($.Fragment,{children:[Object($.jsx)("img",{src:n.image,alt:"Orders",width:"100px"}),Object($.jsxs)("p",{children:["Quantity: ",n.qty]}),Object($.jsxs)("p",{children:["Amount: ",n.price,".00 \xa3"]})]})]})})})},oe=function(){var e,t,n=Object(O.f)().id,r=Object(O.e)(),a=Object(b.b)(),c=Object(b.c)((function(e){return e.orderDetails.order})),i=Object(b.c)((function(e){return e.orderDelete.success})),s=Object(b.c)((function(e){return e.orderItems})),o=Object(b.c)((function(e){return e.userSignIn.userInfo})),d=Object(u.useState)(null===c||void 0===c?void 0:c.isDelivered),l=Object(ne.a)(d,2),p=l[0],j=l[1];Object(u.useEffect)((function(){j(null===c||void 0===c?void 0:c.isDelivered)}),[null===c||void 0===c?void 0:c.isDelivered]);Object(u.useEffect)((function(){var e;a((e=n,function(){var t=Object(f.a)(x.a.mark((function t(n,r){var a,c,i,s;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:P,payload:e}),a=r(),c=a.userSignIn.userInfo,t.next=5,g.a.get(V+"/api/orders/"+e,{headers:{Authorization:"Bearer "+c.token}});case 5:i=t.sent,s=i.data,n({type:F,payload:s}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),n({type:M,payload:t.t0.message});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}()))}),[i]);var m=null===(e=s.orderItems)||void 0===e?void 0:e.reduce((function(e,t){return Number(e)+Number(t.qty)}),0),h=null===(t=s.orderItems)||void 0===t?void 0:t.reduce((function(e,t){return Number(e)+Number(t.price)*Number(t.qty)}),0);return Object($.jsxs)("div",{className:"container",children:[Object($.jsx)("h3",{className:"admin_details__title ",children:"ORDER INFORMATION"}),Object($.jsxs)("div",{className:"admin_details__order-info",children:[Object($.jsxs)("span",{className:"admin_details__number",children:["Order Number: ",null===c||void 0===c?void 0:c._id.slice(-7)]}),Object($.jsxs)("span",{className:"admin_details__number",children:["Total Price: ",null===c||void 0===c?void 0:c.totalPrice,".00 \xa3"]}),Object($.jsxs)("span",{className:"admin_details__number",children:["Total Qty: ",null===c||void 0===c?void 0:c.itemsQty]})]}),(null===o||void 0===o?void 0:o.isAdmin)&&Object($.jsxs)($.Fragment,{children:[Object($.jsx)("span",{className:"admin_details__delivery-title",children:"Delivery info:"}),Object($.jsxs)("select",{className:"admin_details__delivery-info","data-id":null===c||void 0===c?void 0:c._id,value:p?"Delivered":"On its way",onChange:function(e){var t=e.target.value;j("Delivered"===t)},children:[Object($.jsx)("option",{children:"Delivered"}),Object($.jsx)("option",{children:"On its way"})]})]}),Object($.jsxs)("div",{className:"order-details",children:[(null===o||void 0===o?void 0:o.isAdmin)&&Object($.jsxs)("ul",{className:"order-item__title",children:[Object($.jsx)("li",{children:"Name"}),Object($.jsx)("li",{children:"Product artikel"}),Object($.jsx)("li",{children:"Amount"}),Object($.jsx)("li",{children:"Quantity"})]}),Object($.jsx)("ul",{children:null===c||void 0===c?void 0:c.orderItems.map((function(e){return Object($.jsx)(se,{order:null===c||void 0===c?void 0:c.orderItems,item:e},e.productId)}))}),(null===o||void 0===o?void 0:o.isAdmin)&&Object($.jsxs)("div",{className:"order-admin__panel",children:[Object($.jsx)("button",{className:"order-admin__button delete",type:"button","data-id":null===c||void 0===c?void 0:c._id,onClick:function(e){var t,n=e.target.dataset.id;a((t=n,function(){var e=Object(f.a)(x.a.mark((function e(n,r){var a,c,i,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n({type:Q,payload:t}),a=r(),c=a.userSignIn.userInfo,e.next=5,g.a.delete(V+"/api/orders/"+t,{headers:{Authorization:"Bearer "+c.token}});case 5:i=e.sent,s=i.data,n({type:q,payload:s}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),n({type:z,payload:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}()))},children:"Delete Order"}),Object($.jsxs)("div",{className:"order-admin__button-descr",children:[Object($.jsx)("button",{disabled:(null===c||void 0===c?void 0:c.orderItems)>s.orderItems,className:"order-admin__button edit",type:"button","data-id":null===c||void 0===c?void 0:c._id,onClick:function(e){var t,n,c=e.target.dataset.id;a((t=c,n={orderItems:s.orderItems,isDelivered:p,totalPrice:h,itemsQty:m},function(){var e=Object(f.a)(x.a.mark((function e(r,a){var c,i,s,o;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r({type:B,payload:t}),c=a(),i=c.userSignIn.userInfo,e.next=5,g.a.put(V+"/api/orders/"+t,n,{headers:{Authorization:"Bearer "+i.token}});case 5:s=e.sent,o=s.data,r({type:J,payload:o}),r(X()),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),r({type:G,payload:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}())),a(function(){var e=Object(f.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t({type:H,payload:{}})}catch(n){console.log(n)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),r.push("/orders")},children:"Save Changes"}),Object($.jsx)("small",{children:"*First you have to save every item in order "})]})]})]})]})},de=n(21),le=W.a.li(c||(c=Object(K.a)(["\n  display: flex;\n  margin-bottom: 20px;\n  img {\n    margin-right: 20px;\n  }\n  div {\n    display: flex;\n    flex-direction: column;\n  }\n  button {\n    margin-top: 30px;\n    width: 200px;\n    height: 30px;\n    background: transparent;\n    text-transform: uppercase;\n  }\n  select {\n    width: 50px;\n  }\n"]))),ue=function(e){var t=e.item,n=Object(b.b)();return Object($.jsxs)(le,{children:[Object($.jsx)("img",{src:t.image,alt:"cart",width:"150px"}),Object($.jsxs)("div",{children:[Object($.jsx)("p",{children:t.name}),Object($.jsxs)("p",{children:[t.price,".00 \xa3"]}),Object($.jsx)("select",{value:t.qty,"data-id":t.productId,onChange:function(e){var t=e.target.value,r=e.target.dataset.id;n(w(r,t))},children:Object(de.a)(Array(t.countInStock).keys()).map((function(e){return Object($.jsx)("option",{value:e,children:e},e)}))}),Object($.jsx)("button",{type:"button","data-id":t.productId,onClick:function(e){var t,r=e.target.dataset.id;n((t=r,function(e,n){e({type:E,payload:t});var r=n().cart.cartItems;_.a.set("cartItems",JSON.stringify(r))}))},children:"Delete"})]})]})},pe=function(){var e=Object(b.b)(),t=Object(O.e)(),n=Object(b.c)((function(e){return e.cart.cartItems})),r=Object(b.c)((function(e){return e.userSignIn.userInfo})),a=n.reduce((function(e,t){return Number(e)+Number(t.qty)}),0),c=n.reduce((function(e,t){return Number(e)+Number(t.price)*Number(t.qty)}),0);return Object($.jsxs)("div",{className:"cart-page container",children:[Object($.jsx)("ul",{className:"cart-page__list",children:n.length>0?n.map((function(e){return Object($.jsx)(ue,{item:e},e.productId)})):Object($.jsx)("p",{children:"Cart is empty"})}),Object($.jsxs)("div",{className:"cart-page__summary",children:[Object($.jsxs)("h5",{children:["Order Summary",Object($.jsxs)("span",{children:["(",a," items)"]})]}),Object($.jsxs)("span",{children:["Total: ",c,".00 \xa3"]}),Object($.jsx)("button",{type:"submit",disabled:0===n.length,onClick:function(){var i;r?(e((i={orderItems:n,itemsQty:a,totalPrice:c},function(){var e=Object(f.a)(x.a.mark((function e(t,n){var r,a,c,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:R,payload:i}),r=n(),a=r.userSignIn.userInfo,e.next=5,g.a.post(V+"/api/orders",i,{headers:{Authorization:" Bearer "+a.token}});case 5:c=e.sent,s=c.data.data,t({type:N,payload:s}),_.a.set("cartItems",JSON.stringify([])),t((function(e,t){e({type:S});var n=t().cart.cartItems;_.a.set("cartItems",JSON.stringify(n))})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),t({type:k,payload:e.t0.message});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}())),t.push("/ordersucces")):t.push("/signin")},children:"Make an order"})]})]})},je=W.a.li(i||(i=Object(K.a)(["\n  width: 30%;\n  margin-right: 15px;\n  margin-bottom: 40px;\n  &:nth-child(3n) {\n    margin-right: 0;\n  }\n  .product-item__name {\n    margin: 10px 0;\n\n    font-weight: 400;\n  }\n  .product-item__name a {\n    text-decoration: none;\n    color: #0c0c0c;\n  }\n  .product-item__price {\n  }\n"]))),me=function(e){var t=e.item;return Object($.jsxs)(je,{children:[Object($.jsxs)(m.b,{to:"/product/"+t._id,children:[" ",Object($.jsx)("img",{className:"product-item__img",alt:"product",src:t.image})]}),Object($.jsx)("h4",{className:"product-item__name",children:Object($.jsxs)(m.b,{to:"/product/"+t._id,children:[" ",t.name]})}),Object($.jsxs)("span",{className:"product-item__price",children:[t.price,".00 \xa3"]})]})},be="PRODUCTS_LIST_REQUEST",Oe="PRODUCTS_LIST_SUCCESS",he="PRODUCTS_LIST_FAILURE",xe="PRODUCT_DETAILS_REQUEST",fe="PRODUCT_DETAILS_SUCCESS",ve="PRODUCT_DETAILS_FAILURE",ge="https://react-app-com.herokuapp.com",ye=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){return e.productsList})),n=t.products,r=t.loading,a=t.error;return Object(u.useEffect)((function(){e(function(){var e=Object(f.a)(x.a.mark((function e(t){var n,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:be}),e.next=4,g.a.get(ge+"/api/products");case 4:n=e.sent,r=n.data,t({type:Oe,payload:r}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:he,payload:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())}),[]),Object($.jsxs)($.Fragment,{children:[r&&Object($.jsx)("p",{children:"Loading..."}),a&&Object($.jsx)("p",{children:a}),Object($.jsx)("div",{className:"container",children:Object($.jsx)("ul",{className:"product-list",children:null===n||void 0===n?void 0:n.map((function(e){return Object($.jsx)(me,{item:e},e._id)}))})})]})},_e="SIGN_IN_USER_REQUEST",Ie="SIGN_IN_USER_SUCCESS",Ee=" SIGN_IN_USER_FAILURE",Se="SIGN_UP_USER_REQUEST",we="SIGN_UP_USER_SUCCESS",Re=" SIGN_UP_USER_FAILURE",Ne="USER_LOGOUT",ke="https://react-app-com.herokuapp.com",De=W.a.div(s||(s=Object(K.a)(["\n  display: flex;\n  flex-direction: column;\n\n  input,\n  button {\n    width: 60%;\n    display: block;\n    margin: 0 auto;\n    height: 30px;\n    text-transform: uppercase;\n  }\n  input {\n    margin-bottom: 20px;\n  }\n\n  h3,\n  label,\n  .reg-link {\n    width: 60%;\n    display: block;\n    margin: 0 auto;\n  }\n  label {\n    margin-bottom: 10px;\n    font-size: 12px;\n    text-transform: uppercase;\n  }\n  h3 {\n    margin-bottom: 30px;\n    font-size: 18px;\n    text-transform: uppercase;\n  }\n\n  button {\n    height: 40px;\n    font-size: 16px;\n    background: transparent;\n    margin-bottom: 20px;\n  }\n  button:hover {\n    background: #111;\n    color: #fff;\n  }\n\n  .reg-link a {\n    text-decoration: none;\n  }\n"]))),Ce={email:"",password:""},Te=function(){var e=Object(u.useState)(Object(ae.a)({},Ce)),t=Object(ne.a)(e,2),n=t[0],r=t[1],a=Object(b.b)(),c=Object(O.e)(),i=Object(b.c)((function(e){return e.userSignIn})),s=i.loading,o=i.userInfo,d=i.error;Object(u.useEffect)((function(){o&&c.push("/")}),[o,c]);var l=function(e){var t=e.target,a=t.name,c=t.value;r(Object(ae.a)(Object(ae.a)({},n),{},Object(re.a)({},a,c)))};return Object($.jsxs)(De,{children:[Object($.jsx)("h3",{children:"Sign In"}),s&&Object($.jsx)("span",{children:"Loading ..."}),d&&Object($.jsx)("p",{className:"error",children:d}),Object($.jsx)("div",{children:Object($.jsxs)("form",{onSubmit:function(e){e.preventDefault(),a(function(e){var t=e.email,n=e.password;return function(){var e=Object(f.a)(x.a.mark((function e(r){var a,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r({type:_e,payload:{email:t,password:n}}),e.prev=1,e.next=4,g.a.post(ke+"/api/users/signin",{email:t,password:n});case 4:a=e.sent,c=a.data,console.log("email",t),r({type:Ie,payload:c}),_.a.set("userInfo",JSON.stringify(c)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),r({type:Ee,payload:e.t0.response.data.message});case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()}({email:n.email,password:n.password}))},children:[Object($.jsx)("label",{children:" Email"}),Object($.jsx)("input",{type:"email",name:"email",id:"email",value:n.email,onChange:l}),Object($.jsx)("label",{children:" Password"}),Object($.jsx)("input",{type:"password",name:"password",id:"password",value:n.password||"",autoComplete:"on",onChange:l}),Object($.jsx)("button",{type:"submit",children:"Sign In"})]})}),Object($.jsxs)("div",{className:"reg-link",children:[Object($.jsx)("span",{children:"New user?"}),Object($.jsx)(m.b,{to:"/register",children:" Create a new account"})]})]})},Ue=function(){return Object($.jsx)("div",{className:"container",children:Object($.jsx)(Te,{})})},Ae=W.a.li(o||(o=Object(K.a)(["\ndisplay: flex;\n    background: #f9f7f7;\n    //width: 70%;\n    height: 80px;\n    justify-content: space-around;\n    align-items: center;\n    margin-bottom: 30px;\n}"]))),Le=n(24),Pe=n(25),Fe=function(e){var t=e.item;return Object($.jsxs)(Ae,{children:[t.isDelivered?Object($.jsx)("p",{children:"Delivered"}):Object($.jsx)("p",{children:"On its way"}),Object($.jsxs)("div",{children:[Object($.jsxs)("p",{children:["ORDER NUMBER: ",t._id.slice(-7)]}),Object($.jsxs)("span",{children:["TOTAL: ",t.totalPrice,".00 \xa3"]})]}),Object($.jsx)(m.b,{to:"/order/"+t._id,children:Object($.jsx)(Le.a,{icon:Pe.a})})]})},Me=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){return e.myOrders.orders}));return Object(u.useEffect)((function(){e(function(){var e=Object(f.a)(x.a.mark((function e(t,n){var r,a,c,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:D}),r=n(),a=r.userSignIn.userInfo,e.next=5,g.a.get(V+"/api/orders/mine",{headers:{Authorization:"Bearer "+a.token}});case 5:c=e.sent,i=c.data,t({type:C,payload:i}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t({type:T,payload:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}())}),[]),Object($.jsxs)("div",{className:"container",children:[(null===t||void 0===t?void 0:t.length)<=0&&Object($.jsx)("span",{children:"You have no orders"}),Object($.jsx)("ul",{className:"myorder-list",children:null===t||void 0===t?void 0:t.map((function(e){return Object($.jsx)(Fe,{item:e},e._id)}))})]})},Qe=function(){var e=Object(O.e)(),t=Object(b.c)((function(e){return e.order.order}));return Object($.jsxs)("div",{className:"order-success container",children:[Object($.jsx)("h4",{children:"Thanks for your order"}),Object($.jsxs)("span",{children:["ORDER NUMBER: ",null===t||void 0===t?void 0:t._id.slice(-7)]}),Object($.jsxs)("span",{children:["TOTAL: ",null===t||void 0===t?void 0:t.totalPrice,".00 \xa3"]}),Object($.jsx)("button",{type:"button",onClick:function(){e.push("/")},children:"Continue shopping"})]})},qe=function(){var e=Object(O.f)().id,t=Object(u.useState)(1),n=Object(ne.a)(t,2),r=n[0],a=n[1],c=Object(b.b)(),i=Object(b.c)((function(e){return e.productDetails})),s=i.product,o=i.loading,d=i.error;Object(u.useEffect)((function(){var t;c((t=e,function(){var e=Object(f.a)(x.a.mark((function e(n){var r,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n({type:xe,payload:t}),e.next=4,g.a.get(ge+"/api/products/"+t);case 4:r=e.sent,a=r.data,n({type:fe,payload:a}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),n({type:ve,payload:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()))}),[]);return Object($.jsxs)("div",{className:"product-page container",children:[o&&Object($.jsx)("p",{children:"Loading..."}),d&&Object($.jsx)("p",{children:d}),Object($.jsx)("img",{src:null===s||void 0===s?void 0:s.image,alt:"",width:"50%"}),Object($.jsxs)("div",{className:"product-page__info",children:[Object($.jsx)("h3",{children:null===s||void 0===s?void 0:s.name}),Object($.jsxs)("span",{className:"product-page__price",children:[null===s||void 0===s?void 0:s.price,".00 \xa3"]}),Object($.jsx)("span",{children:(null===s||void 0===s?void 0:s.countInStock)>0?"In Stock":"Out Of Stock"}),Object($.jsx)("p",{children:null===s||void 0===s?void 0:s.description}),(null===s||void 0===s?void 0:s.countInStock)&&Object($.jsx)("div",{children:Object($.jsx)("select",{value:r,onChange:function(e){a(e.target.value)},children:Object(de.a)(Array(null===s||void 0===s?void 0:s.countInStock).keys()).map((function(e){return Object($.jsx)("option",{value:e,children:e},e)}))})}),(null===s||void 0===s?void 0:s.countInStock)>0&&Object($.jsx)("button",{type:"button",onClick:function(){c(w(e,r))},children:"Add to cart"})]})]})},ze=W.a.div(d||(d=Object(K.a)(["\n  display: flex;\n  flex-direction: column;\n\n  input,\n  button {\n    width: 60%;\n    display: block;\n    margin: 0 auto;\n    height: 30px;\n    text-transform: uppercase;\n  }\n  input {\n    margin-bottom: 20px;\n  }\n\n  h3,\n  label,\n  .login-link {\n    width: 60%;\n    display: block;\n    margin: 0 auto;\n  }\n  label {\n    margin-bottom: 10px;\n    font-size: 12px;\n    text-transform: uppercase;\n  }\n  h3 {\n    margin-bottom: 30px;\n    font-size: 18px;\n    text-transform: uppercase;\n  }\n\n  button {\n    height: 40px;\n    font-size: 16px;\n    background: transparent;\n    margin-bottom: 20px;\n  }\n  button:hover {\n    background: #111;\n    color: #fff;\n  }\n  .login-link a {\n    text-decoration: none;\n  }\n"]))),Be={name:"",email:"",password:"",comfirmedPassword:""},Je=function(){var e=Object(u.useState)(Object(ae.a)({},Be)),t=Object(ne.a)(e,2),n=t[0],r=t[1],a=Object(u.useState)(""),c=Object(ne.a)(a,2),i=c[0],s=c[1],o=Object(b.b)(),d=Object(O.e)(),l=Object(b.c)((function(e){return e.userSignUp})),p=l.loading,j=l.userInfo,h=l.error;Object(u.useEffect)((function(){j&&d.push("/signin")}),[j,d]);var v=function(e){var t=e.target,a=t.name,c=t.value;r(Object(ae.a)(Object(ae.a)({},n),{},Object(re.a)({},a,c)))};return console.log("error",h),Object($.jsxs)(ze,{children:[Object($.jsx)("h3",{children:"Create a new account"}),p&&Object($.jsx)("span",{children:"Loading ..."}),h&&Object($.jsx)("p",{className:"error",children:h}),i&&Object($.jsx)("p",{className:"error",children:i}),Object($.jsx)("div",{children:Object($.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n.password===n.comfirmedPassword?o(function(e){var t=e.name,n=e.email,r=e.password;return function(){var e=Object(f.a)(x.a.mark((function e(a){var c,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:Se,payload:{name:t,email:n,password:r}}),e.prev=1,e.next=4,g.a.post(ke+"/api/users/register",{name:t,email:n,password:r});case 4:c=e.sent,i=c.data,a({type:we,payload:i}),_.a.set("userInfo",JSON.stringify(i)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0.response),a({type:Re,payload:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()}({name:n.name,email:n.email,password:n.password})):s("Passwords do not match")},children:[Object($.jsx)("label",{children:" Name"}),Object($.jsx)("input",{type:"text",name:"name",id:"name",value:n.name,onChange:v}),Object($.jsx)("label",{children:" Email"}),Object($.jsx)("input",{type:"email",name:"email",id:"email",value:n.email,onChange:v}),Object($.jsx)("label",{children:" Password"}),Object($.jsx)("input",{type:"password",name:"password",id:"password",value:n.password||"",autoComplete:"on",onChange:v}),Object($.jsx)("label",{children:" Comfirm password"}),Object($.jsx)("input",{type:"password",name:"comfirmedPassword",id:"comfirmedPassword",value:n.comfirmedPassword||"",autoComplete:"on",onChange:v}),Object($.jsx)("button",{type:"submit",children:"Sign Up"})]})}),Object($.jsxs)("div",{className:"login-link",children:[Object($.jsx)("span",{children:"Has already an account? "}),Object($.jsx)(m.b,{to:"/signin",children:"Sign In"})]})]})},Ge=function(){return Object($.jsx)("div",{className:"container",children:Object($.jsx)(Je,{})})},Ye=W.a.header(l||(l=Object(K.a)(["\n  display: flex;\n  align-items: center;\n  margin-bottom: 80px;\n\n  .nav-orders,\n  .nav-basket {\n    display: block;\n    margin-left: auto;\n  }\n  a {\n    text-decoration: none;\n    margin-right: 15px;\n    text-transform: uppercase;\n    color: #444242;\n    &:nth-child(1) {\n      font-size: 24px;\n    }\n  }\n  span {\n    margin-right: 15px;\n  }\n  .nav-orders {\n    font-size: 16px;\n  }\n  button {\n    padding: 0;\n    padding-top: 5px;\n    margin-left: 15px;\n    border: none;\n    background: transparent;\n    text-transform: uppercase;\n  }\n  span {\n    margin-left: 5px;\n  }\n  .nav-name {\n    margin: 0;\n  }\n"]))),He=function(){var e=Object(b.b)(),t=Object(O.e)(),n=Object(b.c)((function(e){return e.userSignIn.userInfo})),r=Object(b.c)((function(e){return e.cart.cartItems}));return Object($.jsxs)(Ye,{className:"container",children:[Object($.jsx)(m.c,{to:"/",children:"YUTNII HOME"}),!(null===n||void 0===n?void 0:n.isAdmin)&&Object($.jsx)($.Fragment,{children:Object($.jsxs)(m.c,{className:"nav-basket",to:"/cart",children:[Object($.jsx)(Le.a,{icon:Pe.b}),r.length>0&&Object($.jsx)("sup",{children:r.length}),Object($.jsx)("span",{children:"BUSKET"})]})}),n&&!(null===n||void 0===n?void 0:n.isAdmin)&&Object($.jsx)(m.c,{to:"/myorders",children:"MY ORDERS"}),(null===n||void 0===n?void 0:n.isAdmin)&&Object($.jsx)(m.c,{className:"nav-orders",to:"/orders",children:"ORDERS"}),n?Object($.jsxs)($.Fragment,{children:[Object($.jsx)("span",{className:"nav-name",children:(null===n||void 0===n?void 0:n.isAdmin)?"Admin":null===n||void 0===n?void 0:n.name}),Object($.jsx)("button",{type:"button",onClick:function(){e((function(e){_.a.remove("userInfo"),e({type:Ne})})),t.push("/signin")},children:"Log Out"})]}):Object($.jsxs)(m.c,{to:"/signin",children:[Object($.jsx)(Le.a,{icon:Pe.c}),Object($.jsx)("span",{children:"Sign In"})]})]})},Ve=(n(46),function(){return Object($.jsxs)("div",{children:[Object($.jsx)(He,{}),Object($.jsx)(O.a,{path:"/",exact:!0,component:ye}),Object($.jsx)(O.a,{path:"/product/:id",component:qe}),Object($.jsx)(O.a,{path:"/cart",component:pe}),Object($.jsx)(O.a,{path:"/signin",component:Ue}),Object($.jsx)(O.a,{path:"/register",component:Ge}),Object($.jsx)(O.a,{path:"/myorders",component:Me}),Object($.jsx)(O.a,{path:"/orders",component:te}),Object($.jsx)(O.a,{path:"/order/:id",component:oe}),Object($.jsx)(O.a,{path:"/ordersucces",component:Qe})]})}),Xe=n(27),Ke=n(51),We={cart:{cartItems:_.a.getJSON("cartItems")||[]},userSignIn:{userInfo:_.a.getJSON("userInfo")||null}},Ze=Object(Xe.b)({productsList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{products:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case be:return{loading:!0};case Oe:return{loading:!1,products:t.payload};case he:return{loading:!1,error:t.payload};default:return e}},productDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{product:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case xe:return{loading:!0};case fe:return{loading:!1,product:t.payload};case ve:return{loading:!1,error:t.payload};default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cartItems:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:var n=t.payload,r=e.cartItems.find((function(e){return e.productId===n.productId}));return r?{cartItems:e.cartItems.map((function(e){return e.productId===r.productId?n:e}))}:{cartItems:[].concat(Object(de.a)(e.cartItems),[n])};case E:return{cartItems:e.cartItems.filter((function(e){return e.productId!==t.payload}))};case S:return{cartItems:[]};default:return e}},userSignIn:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _e:return{loading:!0};case Ie:return{loading:!1,userInfo:t.payload};case Ee:return{loading:!1,error:t.payload};case Ne:return{};default:return e}},userSignUp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Se:return{loading:!0};case we:return{loading:!1,userInfo:t.payload};case Re:return{loading:!1,error:t.payload};default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return{loading:!0};case N:return{loading:!1,order:t.payload,success:!0};case k:return{loading:!1,error:t.payload};default:return e}},myOrders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{orders:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return{loading:!0};case C:return{loading:!1,orders:t.payload};case T:return{loading:!1,error:t.payload};default:return e}},allOrders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{orders:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return{loading:!0};case A:return{loading:!1,allOrders:t.payload};case L:return{loading:!1,error:t.payload};default:return e}},orderDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{orderItems:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return{loading:!0};case F:return{loading:!1,order:t.payload};case M:return{loading:!1,error:t.payload};default:return e}},orderDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{orderDetails:{order:{}}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Q:return{loading:!0};case q:return{loading:!1,order:t.payload,success:!0};case z:return{loading:!1,error:t.payload};default:return e}},orderItems:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{orderItems:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:var n=t.payload.productId,r=e.orderItems.find((function(e){return e.productId===n.productId}));return r?{orderItems:e.orderItems.map((function(e){return e.productId===r.productId?n:e}))}:{orderItems:[].concat(Object(de.a)(e.orderItems),[n])};case H:return{orderItems:[]};default:return e}}}),$e=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Xe.c,et=Object(Xe.d)(Ze,We,$e(Object(Xe.a)(Ke.a)));j.a.render(Object($.jsx)(b.a,{store:et,children:Object($.jsx)(m.a,{children:Object($.jsx)(Ve,{})})}),document.getElementById("root"))}},[[86,1,2]]]);
//# sourceMappingURL=main.42c78c7f.chunk.js.map