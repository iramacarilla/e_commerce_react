(this["webpackJsonpe-commerce-react"]=this["webpackJsonpe-commerce-react"]||[]).push([[0],{46:function(e,n,t){},86:function(e,n,t){"use strict";t.r(n);var r,a,c,i,s,o,d,l,u,p=t(1),j=t(29),m=t.n(j),b=t(7),O=t(2),h=t(4),x=t(5),f=t.n(x),v=t(10),g=t(11),y=t.n(g),_=t(15),I=t.n(_),E="ADD_TO_CART",S="REMOVE_FROM_CART",w="REMOVE_ALL",R=function(e,n){return function(){var t=Object(v.a)(f.a.mark((function t(r,a){var c,i,s,o;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.a.get("https://react-app-com.herokuapp.com/api/products/"+e);case 3:c=t.sent,i=c.data,r({type:E,payload:{productId:i._id,name:i.name,price:i.price,image:i.image,countInStock:i.countInStock,qty:n}}),s=a(),o=s.cart.cartItems,I.a.set("cartItems",JSON.stringify(o)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}()},N="ORDER_CREATE_REQUEST",k="ORDER_CREATE_SUCCESS",D="ORDER_CREATE_FAILURE",C="MY_ORDER_LIST_REQUEST",T="MY_ORDER_LIST_SUCCESS",U="MY_ORDER_LIST_FAiLURE",A="ORDER_LIST_REQUEST",L="ORDER_LIST_SUCCESS",P="ORDER_LIST_FAiLURE",F="ORDER_DETAILS_REQUEST",M="ORDER_DETAILS_SUCCESS",Q="ORDER_DETAILS_FAILURE",q="ORDER_DELETE_REQUEST",z="ORDER_DELETE_SUCCESS",B="ORDER_DELETE_FAILURE",J="ORDER_EDIT_REQUEST",G="ORDER_EDIT_SUCCESS",Y="ORDER_EDIT_FAILURE",H="CHANGE_A_ITEM",V="REMOVE_CHANGE_A_ITEM",X="https://react-app-com.herokuapp.com",K=function(){return function(){var e=Object(v.a)(f.a.mark((function e(n,t){var r,a,c,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n({type:A}),r=t(),a=r.userSignIn.userInfo,e.next=5,y.a.get(X+"/api/orders",{headers:{Authorization:"Bearer "+a.token}});case 5:c=e.sent,i=c.data,n({type:L,payload:i}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),n({type:P,payload:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(n,t){return e.apply(this,arguments)}}()},W=t(8),Z=t(9),$=Z.a.li(r||(r=Object(W.a)(["\n  display: flex;\n  justify-content: space-around;\n  align-items: baseline;\n  border: 1px solid gray;\n  margin-bottom: 20px;\n  .admin-list__user-info {\n    display: flex;\n    flex-direction: column;\n  }\n"]))),ee=t(0),ne=function(e){var n=e.item;return Object(ee.jsxs)($,{children:[Object(ee.jsxs)("div",{children:[Object(ee.jsx)("h5",{children:"Order Id"}),Object(ee.jsx)(b.b,{to:"/order/"+n._id,children:n._id.slice(-7)})]}),Object(ee.jsxs)("div",{className:"admin-list__user-info",children:[Object(ee.jsx)("h5",{children:"User"}),Object(ee.jsxs)("span",{children:[" Id:",n.user._id.slice(-7)]}),Object(ee.jsxs)("span",{children:["Name: ",n.user.name]}),Object(ee.jsxs)("span",{children:["Email: ",n.user.email]})]}),Object(ee.jsxs)("div",{children:[Object(ee.jsx)("h5",{children:"Order info"}),Object(ee.jsx)("p",{children:n.isDelivered?"Delivered":"On its way"}),Object(ee.jsxs)("p",{children:["Total price: ",n.totalPrice,".00 \xa3"]})]})]})},te=function(){var e=Object(O.b)(),n=Object(O.c)((function(e){return e.allOrders.allOrders}));return Object(p.useEffect)((function(){e(K())}),[]),Object(ee.jsxs)("div",{className:"container",children:[(null===n||void 0===n?void 0:n.length)<=0&&Object(ee.jsx)("p",{children:"No Orders"}),Object(ee.jsx)("ul",{children:(null===n||void 0===n?void 0:n.length)>0&&(null===n||void 0===n?void 0:n.map((function(e){return Object(ee.jsx)(ne,{item:e},e._id)})))})]})},re=t(19),ae=t(20),ce=t(12),ie=Z.a.li(a||(a=Object(W.a)(["\n  margin-bottom: 15px;\n  border: 1px solid black;\n  padding: 10px;\n  .order-item__descr {\n    display: flex;\n    align-items: center;\n  }\n\n  .order-item__descr p,\n  .order-item__descr span {\n    flex: 2;\n  }\n  .order-item__descr p {\n    margin-left: 20px;\n    @media screen and (min-width: 1280px) {\n      flex: 0.3;\n      margin-left: 150px;\n    }\n  }\n  .order-item__descr span {\n    max-width: 150px;\n  }\n  .order-item__descr button {\n    height: 35px;\n  }\n\n  .order-item__descr form {\n    @media screen and (min-width: 320px) and (max-width: 767px) {\n      margin-right: -50px;\n    }\n  }\n  .order-item__descr form {\n    flex: 0.5;\n  }\n  .order-item__descr form input {\n    max-width: 20%;\n    height: 35px;\n  }\n  .order-item__descr form input:nth-child(1) {\n    //margin-left: -110px;\n    margin-right: 120px;\n    @media screen and (min-width: 320px) and (max-width: 767px) {\n      margin-right: 60px;\n    }\n    @media screen and (min-width: 1280px) {\n      flex: 0.3;\n      margin-right: 200px;\n    }\n  }\n"]))),se={price:"",qty:null},oe=function(e){var n,t=e.item,r=(e.order,Object(O.b)()),a=Object(O.c)((function(e){return e.userSignIn.userInfo.isAdmin})),c=Object(p.useState)(Object(ce.a)(Object(ce.a)({},se),{},{price:t.price,qty:t.qty})),i=Object(re.a)(c,2),s=i[0],o=i[1],d=function(e){var n=e.target,t=n.name,r=n.value;o(Object(ce.a)(Object(ce.a)({},s),{},Object(ae.a)({},t,r)))};return Object(ee.jsx)(ee.Fragment,{children:Object(ee.jsx)(ie,{children:Object(ee.jsxs)("div",{className:"order-item__descr",children:[Object(ee.jsx)("span",{children:t.name}),a?Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsxs)("p",{children:[" ",null===(n=t.productId)||void 0===n?void 0:n.slice(-7)]}),Object(ee.jsxs)("form",{children:[Object(ee.jsx)("input",{type:"text",name:"price",value:s.price,onChange:d}),Object(ee.jsx)("input",{type:"text",name:"qty",value:s.qty,onChange:d})]}),Object(ee.jsx)("button",{onClick:function(e){var n,a=e.target.dataset.id;r((n=Object(ce.a)(Object(ce.a)({},t),{},{productId:a,price:s.price,qty:s.qty}),function(){var e=Object(v.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t({type:H,payload:{productId:n}})}catch(r){console.log(r)}case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()))},"data-id":t.productId,children:"Save"})]}):Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsx)("img",{src:t.image,alt:"Orders",width:"100px"}),Object(ee.jsxs)("p",{children:["Quantity: ",t.qty]}),Object(ee.jsxs)("p",{children:["Amount: ",t.price,".00 \xa3"]})]})]})})})},de=function(){var e,n,t=Object(h.f)().id,r=Object(h.e)(),a=Object(O.b)(),c=Object(O.c)((function(e){return e.orderDetails.order})),i=Object(O.c)((function(e){return e.orderDelete.success})),s=Object(O.c)((function(e){return e.orderItems})),o=Object(O.c)((function(e){return e.userSignIn.userInfo})),d=Object(p.useState)(null===c||void 0===c?void 0:c.isDelivered),l=Object(re.a)(d,2),u=l[0],j=l[1];Object(p.useEffect)((function(){j(null===c||void 0===c?void 0:c.isDelivered)}),[null===c||void 0===c?void 0:c.isDelivered]);Object(p.useEffect)((function(){var e;a((e=t,function(){var n=Object(v.a)(f.a.mark((function n(t,r){var a,c,i,s;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t({type:F,payload:e}),a=r(),c=a.userSignIn.userInfo,n.next=5,y.a.get(X+"/api/orders/"+e,{headers:{Authorization:"Bearer "+c.token}});case 5:i=n.sent,s=i.data,t({type:M,payload:s}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),t({type:Q,payload:n.t0.message});case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e,t){return n.apply(this,arguments)}}()))}),[i]);var m=null===(e=s.orderItems)||void 0===e?void 0:e.reduce((function(e,n){return Number(e)+Number(n.qty)}),0),b=null===(n=s.orderItems)||void 0===n?void 0:n.reduce((function(e,n){return Number(e)+Number(n.price)*Number(n.qty)}),0);return Object(ee.jsxs)("div",{className:"container",children:[Object(ee.jsx)("h3",{className:"admin_details__title ",children:"ORDER INFORMATION"}),Object(ee.jsxs)("div",{className:"admin_details__order-info",children:[Object(ee.jsxs)("span",{className:"admin_details__number",children:["Order Number: ",null===c||void 0===c?void 0:c._id.slice(-7)]}),Object(ee.jsxs)("span",{className:"admin_details__number",children:["Total Price: ",null===c||void 0===c?void 0:c.totalPrice,".00 \xa3"]}),Object(ee.jsxs)("span",{className:"admin_details__number",children:["Total Qty: ",null===c||void 0===c?void 0:c.itemsQty]})]}),(null===o||void 0===o?void 0:o.isAdmin)&&Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsx)("span",{className:"admin_details__delivery-title",children:"Delivery info:"}),Object(ee.jsxs)("select",{className:"admin_details__delivery-info","data-id":null===c||void 0===c?void 0:c._id,value:u?"Delivered":"On its way",onChange:function(e){var n=e.target.value;j("Delivered"===n)},children:[Object(ee.jsx)("option",{children:"Delivered"}),Object(ee.jsx)("option",{children:"On its way"})]})]}),Object(ee.jsxs)("div",{className:"order-details",children:[(null===o||void 0===o?void 0:o.isAdmin)&&Object(ee.jsxs)("ul",{className:"order-item__title",children:[Object(ee.jsx)("li",{children:"Name"}),Object(ee.jsx)("li",{children:"Product artikel"}),Object(ee.jsx)("li",{children:"Amount"}),Object(ee.jsx)("li",{children:"Quantity"})]}),Object(ee.jsx)("ul",{children:null===c||void 0===c?void 0:c.orderItems.map((function(e){return Object(ee.jsx)(oe,{order:null===c||void 0===c?void 0:c.orderItems,item:e},e.productId)}))}),(null===o||void 0===o?void 0:o.isAdmin)&&Object(ee.jsxs)("div",{className:"order-admin__panel",children:[Object(ee.jsx)("button",{className:"order-admin__button delete",type:"button","data-id":null===c||void 0===c?void 0:c._id,onClick:function(e){var n,t=e.target.dataset.id;a((n=t,function(){var e=Object(v.a)(f.a.mark((function e(t,r){var a,c,i,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:q,payload:n}),a=r(),c=a.userSignIn.userInfo,e.next=5,y.a.delete(X+"/api/orders/"+n,{headers:{Authorization:"Bearer "+c.token}});case 5:i=e.sent,s=i.data,t({type:z,payload:s}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t({type:B,payload:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(n,t){return e.apply(this,arguments)}}()))},children:"Delete Order"}),Object(ee.jsxs)("div",{className:"order-admin__button-descr",children:[Object(ee.jsx)("button",{disabled:(null===c||void 0===c?void 0:c.orderItems)>s.orderItems,className:"order-admin__button edit",type:"button","data-id":null===c||void 0===c?void 0:c._id,onClick:function(e){var n,t,c=e.target.dataset.id;a((n=c,t={orderItems:s.orderItems,isDelivered:u,totalPrice:b,itemsQty:m},function(){var e=Object(v.a)(f.a.mark((function e(r,a){var c,i,s,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r({type:J,payload:n}),c=a(),i=c.userSignIn.userInfo,e.next=5,y.a.put(X+"/api/orders/"+n,t,{headers:{Authorization:"Bearer "+i.token}});case 5:s=e.sent,o=s.data,r({type:G,payload:o}),r(K()),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),r({type:Y,payload:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(n,t){return e.apply(this,arguments)}}())),a(function(){var e=Object(v.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{n({type:V,payload:{}})}catch(t){console.log(t)}case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),r.push("/orders")},children:"Save Changes"}),Object(ee.jsx)("small",{children:"*First you have to save every item in order "})]})]})]})]})},le=t(21),ue=Z.a.li(c||(c=Object(W.a)(["\n  display: flex;\n  margin-bottom: 20px;\n  img {\n    margin-right: 20px;\n  }\n  div {\n    display: flex;\n    flex-direction: column;\n  }\n  button {\n    margin-top: 30px;\n    width: 200px;\n    height: 30px;\n    background: transparent;\n    text-transform: uppercase;\n  }\n  select {\n    width: 50px;\n  }\n"]))),pe=function(e){var n=e.item,t=Object(O.b)();return Object(ee.jsxs)(ue,{children:[Object(ee.jsx)("img",{src:n.image,alt:"cart",width:"150px"}),Object(ee.jsxs)("div",{children:[Object(ee.jsx)("p",{children:n.name}),Object(ee.jsxs)("p",{children:[n.price,".00 \xa3"]}),Object(ee.jsx)("select",{value:n.qty,"data-id":n.productId,onChange:function(e){var n=e.target.value,r=e.target.dataset.id;t(R(r,n))},children:Object(le.a)(Array(n.countInStock).keys()).map((function(e){return Object(ee.jsx)("option",{value:e,children:e},e)}))}),Object(ee.jsx)("button",{type:"button","data-id":n.productId,onClick:function(e){var n,r=e.target.dataset.id;t((n=r,function(e,t){e({type:S,payload:n});var r=t().cart.cartItems;I.a.set("cartItems",JSON.stringify(r))}))},children:"Delete"})]})]})},je=function(){var e=Object(O.b)(),n=Object(h.e)(),t=Object(O.c)((function(e){return e.cart.cartItems})),r=Object(O.c)((function(e){return e.userSignIn.userInfo})),a=t.reduce((function(e,n){return Number(e)+Number(n.qty)}),0),c=t.reduce((function(e,n){return Number(e)+Number(n.price)*Number(n.qty)}),0);return Object(ee.jsxs)("div",{className:"cart-page container",children:[Object(ee.jsx)("ul",{className:"cart-page__list",children:t.length>0?t.map((function(e){return Object(ee.jsx)(pe,{item:e},e.productId)})):Object(ee.jsx)("p",{children:"Cart is empty"})}),Object(ee.jsxs)("div",{className:"cart-page__summary",children:[Object(ee.jsxs)("h5",{children:["Order Summary",Object(ee.jsxs)("span",{children:["(",a," items)"]})]}),Object(ee.jsxs)("span",{children:["Total: ",c,".00 \xa3"]}),Object(ee.jsx)("button",{type:"submit",disabled:0===t.length,onClick:function(){var i;r?(e((i={orderItems:t,itemsQty:a,totalPrice:c},function(){var e=Object(v.a)(f.a.mark((function e(n,t){var r,a,c,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n({type:N,payload:i}),r=t(),a=r.userSignIn.userInfo,e.next=5,y.a.post(X+"/api/orders",i,{headers:{Authorization:" Bearer "+a.token}});case 5:c=e.sent,s=c.data.data,n({type:k,payload:s}),I.a.set("cartItems",JSON.stringify([])),n((function(e,n){e({type:w});var t=n().cart.cartItems;I.a.set("cartItems",JSON.stringify(t))})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),n({type:D,payload:e.t0.message});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(n,t){return e.apply(this,arguments)}}())),n.push("/ordersucces")):n.push("/signin")},children:"Make an order"})]})]})},me=Z.a.li(i||(i=Object(W.a)(["\n  width: 30%;\n  margin-right: 15px;\n  margin-bottom: 40px;\n  &:nth-child(3n) {\n    margin-right: 0;\n  }\n  .product-item__name {\n    margin: 10px 0;\n\n    font-weight: 400;\n  }\n  .product-item__name a {\n    text-decoration: none;\n    color: #0c0c0c;\n  }\n  .product-item__price {\n  }\n"]))),be=function(e){var n=e.item;return Object(ee.jsxs)(me,{children:[Object(ee.jsxs)(b.b,{to:"/product/"+n._id,children:[" ",Object(ee.jsx)("img",{className:"product-item__img",alt:"product",src:n.image})]}),Object(ee.jsx)("h4",{className:"product-item__name",children:Object(ee.jsxs)(b.b,{to:"/product/"+n._id,children:[" ",n.name]})}),Object(ee.jsxs)("span",{className:"product-item__price",children:[n.price,".00 \xa3"]})]})},Oe="PRODUCTS_LIST_REQUEST",he="PRODUCTS_LIST_SUCCESS",xe="PRODUCTS_LIST_FAILURE",fe="PRODUCT_DETAILS_REQUEST",ve="PRODUCT_DETAILS_SUCCESS",ge="PRODUCT_DETAILS_FAILURE",ye="https://react-app-com.herokuapp.com",_e=Z.a.li(s||(s=Object(W.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n"]))),Ie=function(){var e=Object(O.b)(),n=Object(O.c)((function(e){return e.productsList})),t=n.products,r=n.loading,a=n.error;return Object(p.useEffect)((function(){e(function(){var e=Object(v.a)(f.a.mark((function e(n){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n({type:Oe}),e.next=4,y.a.get(ye+"/api/products");case 4:t=e.sent,r=t.data,n({type:he,payload:r}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),n({type:xe,payload:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}())}),[]),Object(ee.jsxs)(ee.Fragment,{children:[r&&Object(ee.jsx)("p",{children:"Loading..."}),a&&Object(ee.jsx)("p",{children:a}),Object(ee.jsx)("div",{className:"container",children:Object(ee.jsx)(_e,{children:null===t||void 0===t?void 0:t.map((function(e){return Object(ee.jsx)(be,{item:e},e._id)}))})})]})},Ee="SIGN_IN_USER_REQUEST",Se="SIGN_IN_USER_SUCCESS",we=" SIGN_IN_USER_FAILURE",Re="SIGN_UP_USER_REQUEST",Ne="SIGN_UP_USER_SUCCESS",ke=" SIGN_UP_USER_FAILURE",De="USER_LOGOUT",Ce="https://react-app-com.herokuapp.com",Te=Z.a.div(o||(o=Object(W.a)(["\n  display: flex;\n  flex-direction: column;\n\n  input,\n  button {\n    width: 60%;\n    display: block;\n    margin: 0 auto;\n    height: 30px;\n    text-transform: uppercase;\n  }\n  input {\n    margin-bottom: 20px;\n  }\n\n  h3,\n  label,\n  .reg-link {\n    width: 60%;\n    display: block;\n    margin: 0 auto;\n  }\n  label {\n    margin-bottom: 10px;\n    font-size: 12px;\n    text-transform: uppercase;\n  }\n  h3 {\n    margin-bottom: 30px;\n    font-size: 18px;\n    text-transform: uppercase;\n  }\n\n  button {\n    height: 40px;\n    font-size: 16px;\n    background: transparent;\n    margin-bottom: 20px;\n  }\n  button:hover {\n    background: #111;\n    color: #fff;\n  }\n\n  .reg-link a {\n    text-decoration: none;\n  }\n"]))),Ue={email:"",password:""},Ae=function(){var e=Object(p.useState)(Object(ce.a)({},Ue)),n=Object(re.a)(e,2),t=n[0],r=n[1],a=Object(O.b)(),c=Object(h.e)(),i=Object(O.c)((function(e){return e.userSignIn})),s=i.loading,o=i.userInfo,d=i.error;Object(p.useEffect)((function(){o&&c.push("/")}),[o,c]);var l=function(e){var n=e.target,a=n.name,c=n.value;r(Object(ce.a)(Object(ce.a)({},t),{},Object(ae.a)({},a,c)))};return Object(ee.jsxs)(Te,{children:[Object(ee.jsx)("h3",{children:"Sign In"}),s&&Object(ee.jsx)("span",{children:"Loading ..."}),d&&Object(ee.jsx)("p",{className:"error",children:d}),Object(ee.jsx)("div",{children:Object(ee.jsxs)("form",{onSubmit:function(e){e.preventDefault(),a(function(e){var n=e.email,t=e.password;return function(){var e=Object(v.a)(f.a.mark((function e(r){var a,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r({type:Ee,payload:{email:n,password:t}}),e.prev=1,e.next=4,y.a.post(Ce+"/api/users/signin",{email:n,password:t});case 4:a=e.sent,c=a.data,console.log("email",n),r({type:Se,payload:c}),I.a.set("userInfo",JSON.stringify(c)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),r({type:we,payload:e.t0.response.data.message});case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(n){return e.apply(this,arguments)}}()}({email:t.email,password:t.password}))},children:[Object(ee.jsx)("label",{children:" Email"}),Object(ee.jsx)("input",{type:"email",name:"email",id:"email",value:t.email,onChange:l}),Object(ee.jsx)("label",{children:" Password"}),Object(ee.jsx)("input",{type:"password",name:"password",id:"password",value:t.password||"",autoComplete:"on",onChange:l}),Object(ee.jsx)("button",{type:"submit",children:"Sign In"})]})}),Object(ee.jsxs)("div",{className:"reg-link",children:[Object(ee.jsx)("span",{children:"New user?"}),Object(ee.jsx)(b.b,{to:"/register",children:" Create a new account"})]})]})},Le=function(){return Object(ee.jsx)("div",{className:"container",children:Object(ee.jsx)(Ae,{})})},Pe=Z.a.li(d||(d=Object(W.a)(["\ndisplay: flex;\n    background: #f9f7f7;\n    //width: 70%;\n    height: 80px;\n    justify-content: space-around;\n    align-items: center;\n    margin-bottom: 30px;\n}"]))),Fe=t(24),Me=t(25),Qe=function(e){var n=e.item;return Object(ee.jsxs)(Pe,{children:[n.isDelivered?Object(ee.jsx)("p",{children:"Delivered"}):Object(ee.jsx)("p",{children:"On its way"}),Object(ee.jsxs)("div",{children:[Object(ee.jsxs)("p",{children:["ORDER NUMBER: ",n._id.slice(-7)]}),Object(ee.jsxs)("span",{children:["TOTAL: ",n.totalPrice,".00 \xa3"]})]}),Object(ee.jsx)(b.b,{to:"/order/"+n._id,children:Object(ee.jsx)(Fe.a,{icon:Me.a})})]})},qe=function(){var e=Object(O.b)(),n=Object(O.c)((function(e){return e.myOrders.orders}));return Object(p.useEffect)((function(){e(function(){var e=Object(v.a)(f.a.mark((function e(n,t){var r,a,c,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n({type:C}),r=t(),a=r.userSignIn.userInfo,e.next=5,y.a.get(X+"/api/orders/mine",{headers:{Authorization:"Bearer "+a.token}});case 5:c=e.sent,i=c.data,n({type:T,payload:i}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),n({type:U,payload:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(n,t){return e.apply(this,arguments)}}())}),[]),Object(ee.jsxs)("div",{className:"container",children:[(null===n||void 0===n?void 0:n.length)<=0&&Object(ee.jsx)("span",{children:"You have no orders"}),Object(ee.jsx)("ul",{className:"myorder-list",children:null===n||void 0===n?void 0:n.map((function(e){return Object(ee.jsx)(Qe,{item:e},e._id)}))})]})},ze=function(){var e=Object(h.e)(),n=Object(O.c)((function(e){return e.order.order}));return Object(ee.jsxs)("div",{className:"order-success container",children:[Object(ee.jsx)("h4",{children:"Thanks for your order"}),Object(ee.jsxs)("span",{children:["ORDER NUMBER: ",null===n||void 0===n?void 0:n._id.slice(-7)]}),Object(ee.jsxs)("span",{children:["TOTAL: ",null===n||void 0===n?void 0:n.totalPrice,".00 \xa3"]}),Object(ee.jsx)("button",{type:"button",onClick:function(){e.push("/")},children:"Continue shopping"})]})},Be=function(){var e=Object(h.f)().id,n=Object(p.useState)(1),t=Object(re.a)(n,2),r=t[0],a=t[1],c=Object(O.b)(),i=Object(O.c)((function(e){return e.productDetails})),s=i.product,o=i.loading,d=i.error;Object(p.useEffect)((function(){var n;c((n=e,function(){var e=Object(v.a)(f.a.mark((function e(t){var r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:fe,payload:n}),e.next=4,y.a.get(ye+"/api/products/"+n);case 4:r=e.sent,a=r.data,t({type:ve,payload:a}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t({type:ge,payload:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}()))}),[]);return Object(ee.jsxs)("div",{className:"product-page container",children:[o&&Object(ee.jsx)("p",{children:"Loading..."}),d&&Object(ee.jsx)("p",{children:d}),Object(ee.jsx)("img",{src:null===s||void 0===s?void 0:s.image,alt:"",width:"50%"}),Object(ee.jsxs)("div",{className:"product-page__info",children:[Object(ee.jsx)("h3",{children:null===s||void 0===s?void 0:s.name}),Object(ee.jsxs)("span",{className:"product-page__price",children:[null===s||void 0===s?void 0:s.price,".00 \xa3"]}),Object(ee.jsx)("span",{children:(null===s||void 0===s?void 0:s.countInStock)>0?"In Stock":"Out Of Stock"}),Object(ee.jsx)("p",{children:null===s||void 0===s?void 0:s.description}),(null===s||void 0===s?void 0:s.countInStock)&&Object(ee.jsx)("div",{children:Object(ee.jsx)("select",{value:r,onChange:function(e){a(e.target.value)},children:Object(le.a)(Array(null===s||void 0===s?void 0:s.countInStock).keys()).map((function(e){return Object(ee.jsx)("option",{value:e,children:e},e)}))})}),(null===s||void 0===s?void 0:s.countInStock)>0&&Object(ee.jsx)("button",{type:"button",onClick:function(){c(R(e,r))},children:"Add to cart"})]})]})},Je=Z.a.div(l||(l=Object(W.a)(["\n  display: flex;\n  flex-direction: column;\n\n  input,\n  button {\n    width: 60%;\n    display: block;\n    margin: 0 auto;\n    height: 30px;\n    text-transform: uppercase;\n  }\n  input {\n    margin-bottom: 20px;\n  }\n\n  h3,\n  label,\n  .login-link {\n    width: 60%;\n    display: block;\n    margin: 0 auto;\n  }\n  label {\n    margin-bottom: 10px;\n    font-size: 12px;\n    text-transform: uppercase;\n  }\n  h3 {\n    margin-bottom: 30px;\n    font-size: 18px;\n    text-transform: uppercase;\n  }\n\n  button {\n    height: 40px;\n    font-size: 16px;\n    background: transparent;\n    margin-bottom: 20px;\n  }\n  button:hover {\n    background: #111;\n    color: #fff;\n  }\n  .login-link a {\n    text-decoration: none;\n  }\n"]))),Ge={name:"",email:"",password:"",comfirmedPassword:""},Ye=function(){var e=Object(p.useState)(Object(ce.a)({},Ge)),n=Object(re.a)(e,2),t=n[0],r=n[1],a=Object(p.useState)(""),c=Object(re.a)(a,2),i=c[0],s=c[1],o=Object(O.b)(),d=Object(h.e)(),l=Object(O.c)((function(e){return e.userSignUp})),u=l.loading,j=l.userInfo,m=l.error;Object(p.useEffect)((function(){j&&d.push("/signin")}),[j,d]);var x=function(e){var n=e.target,a=n.name,c=n.value;r(Object(ce.a)(Object(ce.a)({},t),{},Object(ae.a)({},a,c)))};return console.log("error",m),Object(ee.jsxs)(Je,{children:[Object(ee.jsx)("h3",{children:"Create a new account"}),u&&Object(ee.jsx)("span",{children:"Loading ..."}),m&&Object(ee.jsx)("p",{className:"error",children:m}),i&&Object(ee.jsx)("p",{className:"error",children:i}),Object(ee.jsx)("div",{children:Object(ee.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t.password===t.comfirmedPassword?o(function(e){var n=e.name,t=e.email,r=e.password;return function(){var e=Object(v.a)(f.a.mark((function e(a){var c,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:Re,payload:{name:n,email:t,password:r}}),e.prev=1,e.next=4,y.a.post(Ce+"/api/users/register",{name:n,email:t,password:r});case 4:c=e.sent,i=c.data,a({type:Ne,payload:i}),I.a.set("userInfo",JSON.stringify(i)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0.response),a({type:ke,payload:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(n){return e.apply(this,arguments)}}()}({name:t.name,email:t.email,password:t.password})):s("Passwords do not match")},children:[Object(ee.jsx)("label",{children:" Name"}),Object(ee.jsx)("input",{type:"text",name:"name",id:"name",value:t.name,onChange:x}),Object(ee.jsx)("label",{children:" Email"}),Object(ee.jsx)("input",{type:"email",name:"email",id:"email",value:t.email,onChange:x}),Object(ee.jsx)("label",{children:" Password"}),Object(ee.jsx)("input",{type:"password",name:"password",id:"password",value:t.password||"",autoComplete:"on",onChange:x}),Object(ee.jsx)("label",{children:" Comfirm password"}),Object(ee.jsx)("input",{type:"password",name:"comfirmedPassword",id:"comfirmedPassword",value:t.comfirmedPassword||"",autoComplete:"on",onChange:x}),Object(ee.jsx)("button",{type:"submit",children:"Sign Up"})]})}),Object(ee.jsxs)("div",{className:"login-link",children:[Object(ee.jsx)("span",{children:"Has already an account? "}),Object(ee.jsx)(b.b,{to:"/signin",children:"Sign In"})]})]})},He=function(){return Object(ee.jsx)("div",{className:"container",children:Object(ee.jsx)(Ye,{})})},Ve=Z.a.header(u||(u=Object(W.a)(["\n  display: flex;\n  align-items: center;\n  margin-bottom: 80px;\n\n  .nav-orders,\n  .nav-basket {\n    display: block;\n    margin-left: auto;\n  }\n  a {\n    text-decoration: none;\n    margin-right: 15px;\n    text-transform: uppercase;\n    color: #444242;\n    &:nth-child(1) {\n      font-size: 24px;\n    }\n  }\n  span {\n    margin-right: 15px;\n  }\n  .nav-orders {\n    font-size: 16px;\n  }\n  button {\n    padding: 0;\n    padding-top: 5px;\n    margin-left: 15px;\n    border: none;\n    background: transparent;\n    text-transform: uppercase;\n  }\n  span {\n    margin-left: 5px;\n  }\n  .nav-name {\n    margin: 0;\n  }\n"]))),Xe=function(){var e=Object(O.b)(),n=Object(h.e)(),t=Object(O.c)((function(e){return e.userSignIn.userInfo})),r=Object(O.c)((function(e){return e.cart.cartItems}));return Object(ee.jsxs)(Ve,{className:"container",children:[Object(ee.jsx)(b.c,{to:"/",children:"YUTNII HOME"}),!(null===t||void 0===t?void 0:t.isAdmin)&&Object(ee.jsx)(ee.Fragment,{children:Object(ee.jsxs)(b.c,{className:"nav-basket",to:"/cart",children:[Object(ee.jsx)(Fe.a,{icon:Me.b}),r.length>0&&Object(ee.jsx)("sup",{children:r.length}),Object(ee.jsx)("span",{children:"BUSKET"})]})}),t&&!(null===t||void 0===t?void 0:t.isAdmin)&&Object(ee.jsx)(b.c,{to:"/myorders",children:"MY ORDERS"}),(null===t||void 0===t?void 0:t.isAdmin)&&Object(ee.jsx)(b.c,{className:"nav-orders",to:"/orders",children:"ORDERS"}),t?Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsx)("span",{className:"nav-name",children:(null===t||void 0===t?void 0:t.isAdmin)?"Admin":null===t||void 0===t?void 0:t.name}),Object(ee.jsx)("button",{type:"button",onClick:function(){e((function(e){I.a.remove("userInfo"),e({type:De})})),n.push("/signin")},children:"Log Out"})]}):Object(ee.jsxs)(b.c,{to:"/signin",children:[Object(ee.jsx)(Fe.a,{icon:Me.c}),Object(ee.jsx)("span",{children:"Sign In"})]})]})},Ke=(t(46),function(){return Object(ee.jsxs)("div",{children:[Object(ee.jsx)(Xe,{}),Object(ee.jsx)(h.a,{path:"/",exact:!0,component:Ie}),Object(ee.jsx)(h.a,{path:"/product/:id",component:Be}),Object(ee.jsx)(h.a,{path:"/cart",component:je}),Object(ee.jsx)(h.a,{path:"/signin",component:Le}),Object(ee.jsx)(h.a,{path:"/register",component:He}),Object(ee.jsx)(h.a,{path:"/myorders",component:qe}),Object(ee.jsx)(h.a,{path:"/orders",component:te}),Object(ee.jsx)(h.a,{path:"/order/:id",component:de}),Object(ee.jsx)(h.a,{path:"/ordersucces",component:ze})]})}),We=t(27),Ze=t(51),$e={cart:{cartItems:I.a.getJSON("cartItems")||[]},userSignIn:{userInfo:I.a.getJSON("userInfo")||null}},en=Object(We.b)({productsList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{products:[]},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case Oe:return{loading:!0};case he:return{loading:!1,products:n.payload};case xe:return{loading:!1,error:n.payload};default:return e}},productDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{product:{}},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case fe:return{loading:!0};case ve:return{loading:!1,product:n.payload};case ge:return{loading:!1,error:n.payload};default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cartItems:[]},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case E:var t=n.payload,r=e.cartItems.find((function(e){return e.productId===t.productId}));return r?{cartItems:e.cartItems.map((function(e){return e.productId===r.productId?t:e}))}:{cartItems:[].concat(Object(le.a)(e.cartItems),[t])};case S:return{cartItems:e.cartItems.filter((function(e){return e.productId!==n.payload}))};case w:return{cartItems:[]};default:return e}},userSignIn:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case Ee:return{loading:!0};case Se:return{loading:!1,userInfo:n.payload};case we:return{loading:!1,error:n.payload};case De:return{};default:return e}},userSignUp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case Re:return{loading:!0};case Ne:return{loading:!1,userInfo:n.payload};case ke:return{loading:!1,error:n.payload};default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case N:return{loading:!0};case k:return{loading:!1,order:n.payload,success:!0};case D:return{loading:!1,error:n.payload};default:return e}},myOrders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{orders:[]},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case C:return{loading:!0};case T:return{loading:!1,orders:n.payload};case U:return{loading:!1,error:n.payload};default:return e}},allOrders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{orders:[]},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case A:return{loading:!0};case L:return{loading:!1,allOrders:n.payload};case P:return{loading:!1,error:n.payload};default:return e}},orderDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{orderItems:[]},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case F:return{loading:!0};case M:return{loading:!1,order:n.payload};case Q:return{loading:!1,error:n.payload};default:return e}},orderDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{orderDetails:{order:{}}},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case q:return{loading:!0};case z:return{loading:!1,order:n.payload,success:!0};case B:return{loading:!1,error:n.payload};default:return e}},orderItems:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{orderItems:[]},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case H:var t=n.payload.productId,r=e.orderItems.find((function(e){return e.productId===t.productId}));return r?{orderItems:e.orderItems.map((function(e){return e.productId===r.productId?t:e}))}:{orderItems:[].concat(Object(le.a)(e.orderItems),[t])};case V:return{orderItems:[]};default:return e}}}),nn=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||We.c,tn=Object(We.d)(en,$e,nn(Object(We.a)(Ze.a)));m.a.render(Object(ee.jsx)(O.a,{store:tn,children:Object(ee.jsx)(b.a,{children:Object(ee.jsx)(Ke,{})})}),document.getElementById("root"))}},[[86,1,2]]]);
//# sourceMappingURL=main.ff4ac729.chunk.js.map